{% extends "main_frame.html" %}
{% block conten_body %}
	<div class="login_bar" style="color:#F0F0F0;margin-top: 0;">
        <h2 class="title">Sensor</h2>
        <div id="SensorDataBlock">
        </div>
	</div>
{% endblock %}

{% block script %}

	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
	<script type=text/javascript>
	var $SCRIPT_ROOT = {{request.script_root|tojson|safe}};
	var namespace = '/sensor_socketio'
	var socketio = io.connect('http://' + document.domain + ':' + location.port + namespace);
	socketio.on('sensor_socketio_data', function(sensor_json_data){
		var SensorDataBlock_innerHTML = '';
		for(var node_key in sensor_json_data)
		{
			SensorDataBlock_innerHTML +='<p>' + node_key + ':  <span>'+ sensor_json_data[node_key] +'</span></p>';
		}
		document.getElementById("SensorDataBlock").innerHTML = SensorDataBlock_innerHTML;
	});
	$(function submit_form(){
		$.getJSON($SCRIPT_ROOT + '/getSensorData', {
			now: new Date().getTime(),
			type: 'sensor_data'
		},
		function(json_data){
			SensorDataBlock_innerHTML = '';
			for(var node_key in json_data)
			{
				SensorDataBlock_innerHTML +='<p>' + node_key + ':  <span>'+ json_data[node_key] +'</span></p>';
			}
			document.getElementById("SensorDataBlock").innerHTML = SensorDataBlock_innerHTML;
		});
	});
	</script>
{% endblock %}